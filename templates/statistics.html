{% extends "base.html" %}
<!--自动转义-->
{% autoescape None %}
{% block external_lib %}
    <script src="{{static_url("layer/layer.js")}}"></script>
{% end %}
<!-- 网页内嵌js代码实现-->
{% block script %}
    <script>

    </script>
{% end %}

{% block header %}
{% if username == None %}
    <h2>欢迎访问信息管理系统测试版</h2>
{% else %}
    <h2>欢迎您：{{username}}</h2>
{% end%}
{% end %}

{% block body %}

{% if controller["authorized"] == True %}
    {% if user_score != None %}
    <h3> 您当前积分如下： </h3>
    <div id="info_tables">
        <table class="table_structure"  frame="box">
            <colgroup>
                <col class="col_name"/>
                <col class="col_late"/>
                <col class="col_retreat"/>
                <col class="col_absenteeism"/>
                <col class="col_un_present"/>
                <col class="col_total"/>
                <col>
            </colgroup>
          <thead id="user_score">
            <tr>
                <th>姓名</th>
                <th>迟到</th>
                <th>早退</th>
                <th>旷会</th>
                <th>未出席</th>
                <th>当前分数</th>
            </tr>
          </thead>
          <tbody>
            <tr>
                <td id="name">{{user_score["name"]}}</td>
                <td id="late">{{user_score["late"]}}</td>
                <td id="retreat">{{user_score["retreat"]}}</td>
                <td id="absenteeism">{{user_score["absenteeism"]}}</td>
                <td id="un_present">{{user_score["un_present"]}}</td>
                <td id="total">{{user_score["total"]}}</td>
            </tr>
          </tbody>
        </table>
    </div>
    <div id="points_exchange">
    <h2> 积分兑换</h2>
    {% set points = user_score["total"] %}
    {% if points <= 16 %}
        <h3> 您当前积分为：{{ user_score["total"] }} .</h3>
        <p>您当前积分不足，无法兑换。如需兑换，积分需满足大于16分。</p>
        {% set exchange_flags = False %}
    {% elif points <=20 %}
         <h3> 您当前积分为：{{ user_score["total"] }} .</h3>
        <p>您当前可以兑换物品为：</p>
        {% set exchange_flags = True %}
    {% elif points <=30 %}
         <h3> 您当前积分为：{{ user_score["total"] }} .</h3>
         <p>您当前可以兑换物品为：</p>
        {% set exchange_flags = True %}
    {% end %}

    {% if exchange_flags == True %}
    <label class="label_popup_edit">请选择您需要兑换的物品。</label>
        <div class="class_edit_input_block">
            <select id="id_points_exchange_select">
                {% for present in presents_table %}
                <option value="present">{{ present }}</option>
                {% end %}
            </select>
        </div>
    <input type="button" class="class_points_exchange_user" id="id_points_exchange_user" value="积分兑换"/>
    {% end %}
    </div>
    {% end %}
{% else %}
<p> 您未登录，如需查看积分，请先登录 </p>
{% end %}

{% end %}
